"use strict";function loadScene(){if(canvas=document.getElementById("c"),!(gl=canvas.getContext("experimental-webgl")))return void alert("There's no WebGL context available.");cw=window.innerWidth,ch=window.innerHeight,canvas.width=cw,canvas.height=ch,gl.viewport(0,0,canvas.width,canvas.height);var e=document.getElementById("shader-vs"),r=gl.createShader(gl.VERTEX_SHADER);if(gl.shaderSource(r,e.text),gl.compileShader(r),!gl.getShaderParameter(r,gl.COMPILE_STATUS))return alert("Couldn't compile the vertex shader"),void gl.deleteShader(r);var t=document.getElementById("shader-fs"),a=gl.createShader(gl.FRAGMENT_SHADER);if(gl.shaderSource(a,t.text),gl.compileShader(a),!gl.getShaderParameter(a,gl.COMPILE_STATUS))return alert("Couldn't compile the fragment shader"),void gl.deleteShader(a);if(gl.program=gl.createProgram(),gl.attachShader(gl.program,r),gl.attachShader(gl.program,a),gl.linkProgram(gl.program),!gl.getProgramParameter(gl.program,gl.LINK_STATUS))return alert("Unable to initialise shaders"),gl.deleteProgram(gl.program),gl.deleteProgram(r),void gl.deleteProgram(a);gl.useProgram(gl.program);var i=gl.getAttribLocation(gl.program,"vertexPosition");gl.enableVertexAttribArray(i),gl.clearColor(0,0,0,1),gl.clearDepth(1),gl.enable(gl.BLEND),gl.disable(gl.DEPTH_TEST),gl.blendFunc(gl.SRC_ALPHA,gl.ONE);var n=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,n),setup(),vertices=new Float32Array(vertices),velocities=new Float32Array(velocities),thetaArr=new Float32Array(thetaArr),velThetaArr=new Float32Array(velThetaArr),velRadArr=new Float32Array(velRadArr),gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.DYNAMIC_DRAW),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);var l=canvas.width/canvas.height,o=1*Math.tan(30*Math.PI/360),c=-o,s=o*l,g=-s,h=(s+g)/(s-g),d=(o+c)/(o-c),v=2/(s-g),m=2/(o-c),A=[v,0,h,0,0,m,d,0,0,0,10001/9999,2e4/9999,0,0,-1,0],u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=gl.getAttribLocation(gl.program,"vertexPosition");gl.vertexAttribPointer(p,3,gl.FLOAT,!1,0,0);var w=gl.getUniformLocation(gl.program,"modelViewMatrix"),M=gl.getUniformLocation(gl.program,"perspectiveMatrix");gl.uniformMatrix4fv(w,!1,new Float32Array(A)),gl.uniformMatrix4fv(M,!1,new Float32Array(u)),animate(),setTimeout(timer,1500)}function animate(){requestAnimationFrame(animate),drawScene()}function drawScene(){draw(),gl.lineWidth(1),gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.DYNAMIC_DRAW),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.drawArrays(gl.LINES,0,numLines),gl.flush()}function setup(){setup2()}function draw(){switch(drawType){case 0:draw0();break;case 1:draw1();break;case 2:draw2()}}function setup1(){vertices=[],velThetaArr=[],velRadArr=[],ratio=cw/ch,velocities=[];for(var e=0;e<numLines;e++){var r=2*Math.random()+.5,t=Math.random()*Math.PI*2,a=Math.random()*Math.PI*2;vertices.push(r*Math.cos(t),r*Math.sin(t),1.83),vertices.push(r*Math.cos(t),r*Math.sin(t),1.83),velocities.push(.05*(2*Math.random()-1),.05*(2*Math.random()-1),.93+.02*Math.random()),velThetaArr.push(a),velRadArr.push(r)}}function setup2(){vertices=[],velThetaArr=[],velRadArr=[],ratio=cw/ch,velocities=[],thetaArr=[],freqArr=[],boldRateArr=[];for(var e=0;e<numLines;e++){var r=.1+.2*Math.random(),t=Math.random()*Math.PI*2,a=Math.random()*Math.PI*2/30,i=.12*Math.random()+.03,n=.04*Math.random()+.01,l=(2*Math.random()-1)*window.innerWidth/window.innerHeight,o=2*Math.random()-1;vertices.push(r*Math.cos(t),r*Math.sin(t),1.83),vertices.push(r*Math.cos(t),r*Math.sin(t),1.83),thetaArr.push(t),velThetaArr.push(a),velRadArr.push(r),freqArr.push(i),boldRateArr.push(n),randomTargetXArr.push(l),randomTargetYArr.push(o)}freqArr=new Float32Array(freqArr)}function draw0(){var e,r,t,a,i,n,l;vertices.length;for(e=0;e<2*numLines;e+=2)count+=.3,r=3*e,vertices[r]=vertices[r+3],vertices[r+1]=vertices[r+4],i=parseInt(e/2),n=randomTargetXArr[i],l=randomTargetYArr[i],t=vertices[r+3],t+=(n-t)*(.04*Math.random()+.06),vertices[r+3]=t,a=vertices[r+4],a+=(l-a)*(.04*Math.random()+.06),vertices[r+4]=a}function draw1(){var e,r,t,a,i,n,l,o,c;vertices.length;for(e=0;e<2*numLines;e+=2)count+=.3,r=3*e,vertices[r]=vertices[r+3],vertices[r+1]=vertices[r+4],l=parseInt(e/2),i=thetaArr[l],n=velRadArr[l],i+=velThetaArr[l],thetaArr[l]=i,o=n*Math.cos(i),c=n*Math.sin(i),t=vertices[r+3],t+=(o-t)*(.1*Math.random()+.1),vertices[r+3]=t,a=vertices[r+4],a+=(c-a)*(.1*Math.random()+.1),vertices[r+4]=a}function draw2(){cn+=.1;var e,r,t,a,i,n,l;vertices.length;for(e=0;e<2*numLines;e+=2)count+=.3,r=3*e,vertices[r]=vertices[r+3],vertices[r+1]=vertices[r+4],l=parseInt(e/2),i=thetaArr[l],n=velRadArr[l],i+=velThetaArr[l],thetaArr[l]=i,t=vertices[r+3],t=n*Math.cos(i)*.1+t,vertices[r+3]=t,a=vertices[r+4],a+=n*Math.sin(i)*.1,vertices[r+4]=a}function timer(){drawType=(drawType+1)%3,setTimeout(timer,1500)}window.onload=loadScene;var canvas,gl,ratio,vertices,velocities,freqArr,cw,ch,colorLoc,thetaArr,velThetaArr,velRadArr,boldRateArr,drawType,numLines=4e4,target=[],randomTargetXArr=[],randomTargetYArr=[];drawType=2;var count=0,cn=0;